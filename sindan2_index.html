<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>韓国旅行タイプ診断</title>

  <!-- フォント（結果ページと同じ） -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    /* --- 共通デザイン（結果ページと統一） --- */
    body {
      font-family: 'Zen Maru Gothic', sans-serif;
      background: linear-gradient(180deg, #E8FFFA 0%, #FFFFFF 100%);
      color: #333;
      margin: 0;
      padding: 0;
    }

    /* --- ヘッダー（結果ページと同じ） --- */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2rem;
      background-color: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    header h1 {
      font-size: 1.6rem;
      color: #00AC9A;
      font-weight: 700;
    }

    nav ul {
      display: flex;
      gap: 1.5rem;
      font-weight: 600;
      font-size: 1rem;
      list-style: none;
      margin: 0;
      padding: 0;
    }

    nav a {
      color: #00AC9A;
      text-decoration: none;
      transition: 0.3s;
    }

    nav a:hover {
      opacity: 0.7;
    }

    /* --- 中央コンテンツ（結果ページと同じ箱デザイン） --- */
    main {
      max-width: 750px;
      margin: 3rem auto;
      background: white;
      padding: 2.5rem 2rem;
      border-radius: 1.5rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }

    h1 {
      text-align: center;
      color: #00AC9A;
      font-size: 1.8rem;
      margin-bottom: 40px;
      font-weight: 700;
    }

    /* --- プログレスバー --- */
    .progress-container {
      background-color: #d9f3f0;
      border-radius: 10px;
      height: 10px;
      margin: 20px auto 40px;
      width: 80%;
    }

    .progress {
      background-color: #00AC9A;
      height: 10px;
      width: 0%;
      border-radius: 10px;
      transition: width 0.4s;
    }

    /* --- 質問 --- */
    .question-group {
      margin: 50px 0;
      text-align: center;
    }

    .question {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: #00AC9A;
    }

    /* --- 選択肢 --- */
    .options {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin: 25px 0;
    }

    .options input[type="radio"] {
      display: none;
    }

    .options label {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      transition: 0.2s ease;
      opacity: 0.7;
      font-size: 0.9rem;
      color: #00AC9A;
    }

    .options label::before {
      content: '';
      display: block;
      width: 36px;
      height: 36px;
      border: 3px solid #a8e5d8;
      border-radius: 50%;
      transition: 0.25s;
    }

    .options input[type="radio"]:checked + label::before {
      background-color: #00AC9A;
      border-color: #00AC9A;
      transform: scale(1.2);
    }

    .options input[type="radio"]:checked + label {
      opacity: 1;
      transform: scale(1.05);
      font-weight: 700;
      color: #009685;
    }

    /* --- ボタン（結果ページと同じ） --- */
    .btn-area {
      text-align: center;
      margin-top: 40px;
    }

    button {
      background-color: #00AC9A;
      color: white;
      border: none;
      padding: 14px 32px;
      font-size: 1.2rem;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 6px 0 #009685;
      transition: 0.2s ease;
    }

    button:hover {
      transform: translateY(2px);
      box-shadow: 0 3px 0 #009685;
    }

  </style>
</head>
<body>

  <!-- 統一されたヘッダー -->
  <header>
    <h1>韓国旅行タイプ診断</h1>
    <nav>
      <ul>
        <li><a href="sindan.html">タイプ診断</a></li>
        <li><a href="type-list.html">タイプ一覧</a></li>
        <li><a href="jyouhou.html">おすすめ情報</a></li>
      </ul>
    </nav>
  </header>

  <!-- メイン内容 -->
  <main>
    <h1>韓国旅行タイプ診断</h1>

    <div class="progress-container"><div id="progress" class="progress"></div></div>

    <form id="quizForm"></form>

    <div class="btn-area">
      <button type="button" id="nextBtn">次へ</button>
    </div>
  </main>


  <!-- JS：質問の処理（元のまま） -->
  <script>
    const questions = [
      '韓国語で現地の人と会話できるか不安ですか？',
      '文化やマナーの違いで失礼をしないか不安ですか？',
      '食事や飲み水が合わないのではと不安ですか？',
      '韓国の交通機関の使い方に不安がありますか？',
      '治安やぼったくりが心配ですか？',
      '旅行の計画を立てるのが面倒だと感じますか？',
      '韓国旅行の費用が高いと感じますか？',
      '一緒に行く人がいないことが不安ですか？',
      '観光地でのマナーや距離感に不安がありますか？',
      'トイレや衛生面に不安がありますか？',
      '気候や服装の違いが気になりますか？',
      '海外旅行そのものに抵抗がありますか？',
      '情報が多すぎてどれを信じればいいか分からないと感じますか？',
      '韓国人とのコミュニケーションが不安ですか？',
      '自分の英語・韓国語力に自信がありませんか？'
    ];

    const form = document.getElementById("quizForm");
    const nextBtn = document.getElementById("nextBtn");
    const progress = document.getElementById("progress");

    let page = 0;
    const perPage = 5;
    const totalPages = Math.ceil(questions.length / perPage);
    const answers = {};

    function renderQuestions() {
      form.innerHTML = "";
      const start = page * perPage;
      const end = Math.min(start + perPage, questions.length);
      const subset = questions.slice(start, end);

      subset.forEach((q, i) => {
        const qNum = start + i + 1;
        const div = document.createElement("div");
        div.className = "question-group";
        div.innerHTML = `
          <p class="question">Q${qNum}. ${q}</p>
          <div class="options">
            ${[1,2,3,4,5].map(v => `
              <input type="radio" name="q${qNum}" value="${v}" id="q${qNum}_${v}" ${answers[qNum]==v?'checked':''}>
              <label for="q${qNum}_${v}">${v===1?'とても不安':v===2?'不安':v===3?'どちらでもない':v===4?'あまり不安でない':'全く不安でない'}</label>
            `).join('')}
          </div>`;
        form.appendChild(div);
      });

      progress.style.width = `${(page / (totalPages - 1)) * 100}%`;
      nextBtn.textContent = page === totalPages - 1 ? "診断結果を見る" : "次へ";
    }

    nextBtn.addEventListener("click", () => {
      const start = page * perPage + 1;
      const end = Math.min(start + perPage - 1, questions.length);
      let allAnswered = true;

      for (let i = start; i <= end; i++) {
        const selected = document.querySelector(`input[name=q${i}]:checked`);
        if (!selected) { allAnswered = false; break; }
        answers[i] = selected.value;
      }

      if (!allAnswered) {
        alert("すべての質問に回答してください。");
        return;
      }

      if (page < totalPages - 1) {
        page++;
        renderQuestions();
      } else {
        const values = Object.values(answers).map(Number);
        const avg = values.reduce((a,b)=>a+b,0)/values.length;
        let type = "";

        if (avg <= 1.8) type = "コミュニケーション大事タイプ";
        else if (avg <= 2.5) type = "準備・計画大事タイプ";
        else if (avg <= 3.2) type = "文化・治安重視タイプ";
        else if (avg <= 3.8) type = "生活・環境重視タイプ";
        else type = "安心タイプ";

        window.location.href = `result.html?type=${encodeURIComponent(type)}`;
      }
    });

    renderQuestions();
  </script>

</body>
</html>
